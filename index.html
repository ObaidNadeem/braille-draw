<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Braille Draw</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Workspace -->
<div class="workspace">
  <div class="canvas-area">
    <div class="grid-label" id="grid-label">4 &times; 4 pixels &mdash; 2 chars</div>
    <div class="grid-container" id="grid" data-show-guides="true"></div>
    <div class="floating-toolbar">
      <label for="cols">Cells</label>
      <select id="cols">
        <option value="1">1</option>
        <option value="2" selected>2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="8">8</option>
        <option value="10">10</option>
      </select>
      <span class="dim">&times;</span>
      <select id="rows" aria-label="Cell rows">
        <option value="1" selected>1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
      </select>
      <div class="sep"></div>
      <div class="mode-toggle" role="group" aria-label="Draw mode">
        <button id="mode-draw" class="active" onclick="setMode('draw')">Draw</button>
        <button id="mode-erase" onclick="setMode('erase')">Erase</button>
      </div>
      <div class="sep"></div>
      <button onclick="fillAll()">Fill</button>
      <button onclick="invertAll()">Invert</button>
      <button onclick="clearGrid()">Clear</button>
    </div>
  </div>

  <div class="output-sidebar">
    <div class="sidebar-body">
      <div class="output-section">
        <div class="section-head"><span class="section-label">Braille</span><button class="copy-sec-btn" onclick="copySection(this, 'out-braille')">Copy</button></div>
        <div class="output-content" id="out-braille">&#x2800;</div>
      </div>
      <div class="output-section">
        <div class="section-head"><span class="section-label">Unicode</span><button class="copy-sec-btn" onclick="copySection(this, 'out-unicode')">Copy</button></div>
        <div class="output-content hex" id="out-unicode">U+2800</div>
      </div>
      <div class="output-section">
        <div class="section-head"><span class="section-label">ASCII</span><button class="copy-sec-btn" onclick="copySection(this, 'out-ascii')">Copy</button></div>
        <div class="output-content ascii" id="out-ascii"></div>
      </div>
      <div class="output-section">
        <div class="section-head"><span class="section-label">Termdot</span><button class="copy-sec-btn" onclick="copySection(this, 'out-termdot')">Copy</button></div>
        <div class="output-content hex" id="out-termdot"></div>
      </div>
      <div class="output-section">
        <div class="section-head"><span class="section-label">JS</span><button class="copy-sec-btn" onclick="copySection(this, 'out-js')">Copy</button></div>
        <div class="output-content hex" id="out-js"></div>
      </div>
      <div class="output-section">
        <div class="section-head">
          <span class="section-label">Animation</span>
          <select id="anim-format" onchange="updateAnimExport()" aria-label="Export format">
            <option value="js-braille">JS Braille</option>
            <option value="js-termdot">JS Termdot</option>
            <option value="js-grid">JS Grid</option>
            <option value="json">JSON</option>
          </select>
          <button class="copy-sec-btn" onclick="copySection(this, 'out-anim')">Copy</button>
        </div>
        <div class="output-content hex" id="out-anim"></div>
      </div>
      <div class="shortcuts-section">
        <div class="section-head"><span class="section-label">Shortcuts</span></div>
        <div class="shortcuts-cols">
          <div class="shortcuts-grid">
            <kbd>D</kbd><span>Draw</span>
            <kbd>E</kbd><span>Erase</span>
            <kbd>C</kbd><span>Clear</span>
            <kbd>F</kbd><span>Fill</span>
            <kbd>I</kbd><span>Invert</span>
          </div>
          <div class="shortcuts-grid">
            <kbd>N</kbd><span>New frame</span>
            <kbd>Space</kbd><span>Play</span>
            <kbd>&larr;</kbd><span>Prev frame</span>
            <kbd>&rarr;</kbd><span>Next frame</span>
            <kbd>Shift</kbd><span>Erase dot</span>
          </div>
        </div>
      </div>
      <div class="tips-section">
        <div class="section-head"><span class="section-label">Tips</span></div>
        <ul class="tips-list">
          <li>Enable <strong>Onion</strong> to ghost the previous frame while drawing â€” helps with smooth animations.</li>
          <li>Use <strong>Dup</strong> to duplicate a frame, then edit the copy for incremental changes.</li>
          <li>Hold <strong>Shift + click</strong> to erase individual dots regardless of mode.</li>
          <li>Drag across dots to paint or erase in one stroke.</li>
          <li>Use the <strong>Animation</strong> export to get frame arrays ready for your CLI code.</li>
        </ul>
      </div>
    </div>
    <div class="sidebar-footer">
      <strong class="sidebar-brand">Braille Draw</strong>
      <span>Draw braille patterns for CLI apps.</span>
      <a href="https://github.com/ObaidNadeem/braille-draw" target="_blank" rel="noopener">github.com/ObaidNadeem/braille-draw</a>
    </div>
  </div>
</div>

<!-- Timeline dock -->
<div class="timeline-dock">
  <div class="transport-bar">
    <div class="transport-left">
      <button class="pb-btn" onclick="stepBackward()" aria-label="Previous frame" title="Previous frame (&#8592;)">&#9666;</button>
      <button class="pb-play" id="play-btn" onclick="togglePlay()" title="Play / Pause (Space)">&#9654; Play</button>
      <button class="pb-btn" onclick="stepForward()" aria-label="Next frame" title="Next frame (&#8594;)">&#9656;</button>
      <div class="sep"></div>
      <span class="frame-counter" id="frame-counter" aria-live="polite">1 / 1</span>
      <div class="sep"></div>
      <div class="fps-group">
        <label for="fps-slider">FPS</label>
        <input type="range" id="fps-slider" min="1" max="24" value="4" oninput="setAnimFPS(this.value)">
        <span class="fps-val" id="fps-value">4</span>
      </div>
      <div class="sep"></div>
      <button id="loop-btn" class="tgl active" onclick="toggleLoop()" title="Loop">Loop</button>
      <button id="onion-btn" class="tgl" onclick="toggleOnion()" title="Onion skin">Onion</button>
    </div>
    <div class="transport-spacer"></div>
    <div class="transport-right">
      <button onclick="addFrame()" title="New frame (N)">+ New</button>
      <button onclick="duplicateFrame()">Dup</button>
      <button onclick="deleteFrame()">Del</button>
      <div class="sep"></div>
      <button onclick="moveFrameLeft()" aria-label="Move frame left">&#9666;</button>
      <button onclick="moveFrameRight()" aria-label="Move frame right">&#9656;</button>
    </div>
  </div>
  <div class="frame-strip" id="timeline-strip"></div>
</div>

<script src="app.js"></script>
</body>
</html>
